(this.webpackJsonpcars24=this.webpackJsonpcars24||[]).push([[0],{16:function(e,t,a){e.exports=a(27)},21:function(e,t,a){},22:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(2),i=a.n(c),s=(a(21),a(22),a(11)),l=a(6),o=a(7),u=a(9),d=a(8),m=a(10),h=a.n(m),p=a(14),f=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://yati-malik.github.io/cars24-test/products.json");case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,n="Page"+t,e.abrupt("return",r[n]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=a(1),P=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).handlePriceChange=function(e,t){switch(e.persist(),t){case"start":r.setState({startPrice:e.target.value});break;case"end":r.setState({endPrice:e.target.value})}},r.reset=function(){r.setState({startPrice:"",endPrice:""})},r.handleCriteriaApply=function(){if(!(r.state.startPrice<r.state.endPrice))return v.b.warn("Start price can not be less than end price !",{position:v.b.POSITION.TOP_LEFT}),!1;var e={startPrice:r.state.startPrice,endPrice:r.state.endPrice};r.props.handleSearchCriteria(e)},r.state={startPrice:"",endPrice:""},r}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"sidebar"},n.a.createElement(v.a,{autoClose:3e3}),n.a.createElement("h2",null,"Search Criteria"),n.a.createElement("hr",null),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("span",{className:"bold"},"Price range")),n.a.createElement("div",null,n.a.createElement("label",null,"Start Price"),n.a.createElement("input",{type:"number",value:this.state.startPrice,onChange:function(t){return e.handlePriceChange(t,"start")}})),n.a.createElement("div",null,n.a.createElement("label",null,"End Price"),n.a.createElement("input",{type:"number",value:this.state.endPrice,onChange:function(t){return e.handlePriceChange(t,"end")}})),n.a.createElement("div",{className:"apply"},n.a.createElement("input",{type:"button",value:"Apply",onClick:this.handleCriteriaApply}))))}}]),a}(n.a.Component),E=a(15),g=Object(r.forwardRef)((function(e,t){var a=Object(r.useState)(""),c=Object(E.a)(a,2),i=c[0],s=c[1];return Object(r.useImperativeHandle)(t,(function(){return{reset:function(){s("")}}})),n.a.createElement("div",{className:"search-bar"},n.a.createElement(v.a,{autoClose:3e3}),n.a.createElement("div",null,n.a.createElement("input",{type:"text",value:i,placeholder:"Name",className:"form-control",onChange:function(e){s(e.target.value)}}),n.a.createElement("input",{type:"button",className:"search",value:"Search",onClick:function(){""==i?v.b.warn("Search field value is empty !",{position:v.b.POSITION.TOP_RIGHT}):e.handleProductSearch(i)}})))})),b=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).loadingCSS={height:"100px",margin:"30px"},e.getProducts=function(t){f(t).then((function(t){var a=e.state.products;if(1===e.currentPage)e.setState({products:t.Products});else{var r=[].concat(Object(s.a)(a),Object(s.a)(t.Products));e.setState({products:r})}}))},e.scrollHandler=function(t){var a=e.loadingRef,r=document.body,n="scrollTop",c="scrollHeight";(a[n]||r[n])/((a[c]||r[c])-a.clientHeight)*100>73&&(e.currentPage+=1,e.getProducts(e.currentPage))},e.handleReset=function(){e.currentPage=1,e.sideBar.current.reset(),e.searchBar.current.reset(),e.getProducts(e.currentPage)},e.handleSearchCriteria=function(t){var a=t.startPrice,r=t.endPrice,n=e.state.products.filter((function(e){return e.Amount>=a&&e.Amount<r}));e.setState({products:n})},e.handleProductSearch=function(t){var a=e.state.products.filter((function(e){return e.Name.toUpperCase().includes(t.toUpperCase())}));e.setState({products:a})},e.state={products:[]},e.currentPage=1,e.sideBar=n.a.createRef(),e.searchBar=n.a.createRef(),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getProducts(this.currentPage),this.loadingRef.addEventListener("scroll",(function(t){return e.scrollHandler(t)}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"app-container"},n.a.createElement(P,{handleSearchCriteria:function(t){return e.handleSearchCriteria(t)},ref:this.sideBar}),n.a.createElement(g,{handleProductSearch:function(t){return e.handleProductSearch(t)},ref:this.searchBar}),n.a.createElement("div",{className:"grid-container"},n.a.createElement("div",{className:"tbody-container"},n.a.createElement("div",{className:"product thead-container"},n.a.createElement("div",{className:"col-item"},"Name"),n.a.createElement("div",{className:"col-item"},"Category"),n.a.createElement("div",{className:"col-item"},"Amount"),n.a.createElement("div",{className:"col-item"},"Payment")),n.a.createElement("div",{className:"productDiv",ref:function(t){return e.loadingRef=t}},n.a.createElement("div",{ref:function(t){return e.targetRef=t}},this.state.products.map((function(e){return n.a.createElement("div",{className:"product",key:e.Id},n.a.createElement("div",{className:"col-item"},e.Name),n.a.createElement("div",{className:"col-item"},e.Category),n.a.createElement("div",{className:"col-item"},e.Amount),n.a.createElement("div",{className:"col-item"},e.Payment))}))))),n.a.createElement("div",{className:"reset",onClick:this.handleReset},n.a.createElement("span",null,"Reset"))))}}]),a}(n.a.Component);var N=function(){return n.a.createElement(b,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(26);i.a.render(n.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.1e06c2a0.chunk.js.map